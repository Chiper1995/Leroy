SubscribeLink=function(t,i){null!=t.data("subscribeLink")&&t.data("subscribeLink").destroy(),this.$element=t,this.options=$.extend({},{selector:null},i),this.registerEvents(),t.data("subscribeLink",this)},SubscribeLink.prototype.destroy=function(){this.$element.off("click.subscribeLink")},SubscribeLink.prototype.registerEvents=function(){var i=this;null===this.options.selector?this.$element.on("click.subscribeLink",function(t){i.handleClickEvent(t,$(this))}):this.$element.on("click.subscribeLink",this.options.selector,function(t){i.handleClickEvent(t,$(this))})},SubscribeLink.prototype.handleClickEvent=function(t,e){if(t.preventDefault(),t.stopImmediatePropagation(),void 0===e.attr("disabled")||!1===e.attr("disabled")){var i=e.attr("href");e.attr("disabled","disabled"),$.post(i).done(function(t){if("success"===t.status){var i=$(".journal-thumbnails .subscribe-link");t.currentUserSubscribedIt?(e.addClass("subscribed-it"),e.attr("data-original-title","Отписаться"),i.map(function(t,i){e[0].href===i.href&&(i.setAttribute("data-original-title","Отписаться"),i.setAttribute("title",""),i.classList.add("subscribed-it"))})):(e.removeClass("subscribed-it"),e.attr("data-original-title","Подписаться"),i.map(function(t,i){e[0].href===i.href&&(i.setAttribute("data-original-title","Подписаться"),i.setAttribute("title",""),i.classList.remove("subscribed-it"))}))}}).always(function(){e.removeAttr("disabled"),e.blur()})}},null==$.fn.subscribeLink&&($.fn.subscribeLink=function(i){if("object"==typeof(i=i||{}))return this.each(function(){var t=$.extend(!0,{},i);new SubscribeLink($(this),t)}),this;throw new Error("Invalid arguments for SubscribeLink: "+i)});