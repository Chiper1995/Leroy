jQuery(document).ready(function(){var a=["gmail.com","mail.ru","yandex.ru","ya.ru","rambler.ru","bk.ru","inbox.ru","list.ru","icloud.com","hotmail.com","outlook.com"];a.push("gmail.ru","mail.com","yandex.com","ya.com","rambler.com","bk.com","inbox.com","list.com","icloud.ru","hotmail.ru","outlook.ru");var l=["gmail","mail","yandex","ya","rambler","bk","inbox","list","icloud","hotmail","outlook"],i=["com","ru"];function r(l,i){var o,a,r=$(l).val();String(r).trim()?/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r)?(o=String(r).split("@"),a=u(o[1]),o[1]!=a&&(m(i+" заменено на "+e(r)),$(l).val(e(r)))):m("Значение «Email» не является правильным email адресом."):m("Необходимо заполнить «Email».")}function m(l){void 0!==l?($(".field-profile-email").removeClass("has-success"),$(".field-profile-email").addClass("has-error"),$(".field-profile-email").find("p.help-block").html(l)):($(".field-profile-email").removeClass("has-error"),$(".field-profile-email").addClass("has-success"),$(".field-profile-email").find("p.help-block").html(""))}function e(l){var i=String(l).split("@"),o=u(i[1]);return i[0]+"@"+o}function u(l){return"gmail.ru"==l&&(l="gmail.com"),"icloud.ru"==l&&(l="icloud.com"),"mail.com"==l&&(l="mail.ru"),"yandex.com"==l&&(l="yandex.ru"),"ya.com"==l&&(l="ya.ru"),"rambler.com"==l&&(l="rambler.ru"),"bk.com"==l&&(l="bk.ru"),"list.com"==l&&(l="list.ru"),"inbox.com"==l&&(l="inbox.ru"),l}$("#profile-email").on("blur",function(){$(this).mailcheck({domains:a,secondLevelDomains:l,topLevelDomains:i,suggested:function(l,i){var o=$(l).val();m(),-1!=a.indexOf(i.domain)&&(m(o+" заменено на "+i.full),$(l).val(i.full)),r(l,o)},empty:function(l){var i=$(l).val();m(),r(l,i)}})})});